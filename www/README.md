# Website

The documentation website is built using [Docusaurus](https://docusaurus.io/).


# API Documentation

The API docs are generated by [TypeDoc](https://typedoc.org/index.html) and integrated into docusaurus using [docusaurus-plugin-typedoc](https://typedoc-plugin-markdown.org/plugins/docusaurus).
This setup needs the development/source docs site to be in the same repo as the sources, as there are relative paths in the docusaurus config file to the sources.
A separate deployment step will be needed to generate the docs and push them to the repo that feeds the live site.
This also means that we can iterate on the docs in the source repo without publishing them immediately, and then choose to publish them in sync with publishing packages.

The workflow for working on API docs is:
```
- $ cd /path/to/repo/root
- $ make docs                           # to initialize the api docs
- $ make docs-run                       # to run the docs site locally
- visit http://localhost:3000/docs/api/core
- edit the doc comments in the sources
- $ make docs                           # to regenerate the api docs
```
A faster but not robust way to regenerate the api docs is:
```
- cd /path/to/repo/root/www && npx docusaurus generate-typedoc
```
To publish the docs to the live site:
```
- $ make docs-publish
```
This will suggest to run:
```
Test locally: make docs-serve
Push to live site: cd www/docs_site/; git add -A; git commit -m 'update to <commit>'; git push; cd -
```
Note that the docs_site commit messages will mention the wrong commit hashes if `make docs-publish` is run from a commit that is not (an ancestor of) `main`.

The documentation for the tags that TypeDoc recognizes is
[here](https://typedoc.org/guides/tags/).

Once the docs site is running at http://localhost:3000, the markdown documentation under `www/docs` can be edited and the changes are usually picked up automatically.

Changes to the `www/docs` file structure usually need to be reflected in the `www/sidebars.ts` file.

The `docusaurus.config.ts` file is sensitive to the file system locations of the source entry points and tsconfig files.
