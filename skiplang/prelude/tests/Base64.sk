module alias T = SKTest;

module Base64Test;

@test
fun base64Encode(): void {
  Base64().encode();
}

@test
fun base64Decode(): void {
  Base64().decode();
}

class Base64() {
  const cases: Array<(String, String)> = Array[
    ("aaaaaaaaaaaaaaaaa", "YWFhYWFhYWFhYWFhYWFhYWE="),
    ("Hello World", "SGVsbG8gV29ybGQ="),
    ("foobar", "Zm9vYmFy"),
    ("fooba", "Zm9vYmE="),
    ("foob", "Zm9vYg=="),
    ("foo", "Zm9v"),
    ("fo", "Zm8="),
    ("f", "Zg=="),
    ("{\"v1\": \"6\", \"v2\": \"11\"}", "eyJ2MSI6ICI2IiwgInYyIjogIjExIn0="),
    ("", ""),
    ("Base64", "QmFzZTY0"),
    ("1234567890", "MTIzNDU2Nzg5MA=="),
    ("Rust", "UnVzdA=="),
    ("TypeScript", "VHlwZVNjcmlwdA=="),
    ("Â¡Hola!", "wqFIb2xhIQ=="),
    ("ä¸­æ–‡æµ‹è¯•", "5Lit5paH5rWL6K+V"),
    ("Line\nBreak", "TGluZQpCcmVhaw=="),
    ("Spaced text", "U3BhY2VkIHRleHQ="),
    (
      "The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog.",
      "VGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZy4gVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZy4=",
    ),
    ("cafÃ©", "Y2Fmw6k="),
    ("naÃ¯ve", "bmHDr3Zl"),
    ("Ã©lÃ¨ve", "w6lsw6h2ZQ=="),
    ("franÃ§ais", "ZnJhbsOnYWlz"),
    ("Ã¼ber", "w7xiZXI="),
    ("faÃ§ade", "ZmHDp2FkZQ=="),
    ("coÃ¶perate", "Y2/DtnBlcmF0ZQ=="),
    ("SÃ£o Paulo", "U8OjbyBQYXVsbw=="),
    ("ÐœÐ¾ÑÐºÐ²Ð°", "0JzQvtGB0LrQstCw"),
    ("æ±äº¬", "5p2x5Lqs"),
    ("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "2KfZhNi52LHYqNmK2Kk="),
    ("à¤¹à¤¿à¤¨à¥à¤¦à¥€", "4KS54KS/4KSo4KWN4KSm4KWA"),
    ("ä¸­æ–‡", "5Lit5paH"),
    ("Î•Î»Î»Î·Î½Î¹ÎºÎ¬", "zpXOu867zrfOvc65zrrOrA=="),
    ("Deutsch ist schÃ¶n", "RGV1dHNjaCBpc3Qgc2Now7Zu"),
    ("ðŸ¤–", "8J+klg=="),
    ("ðŸ˜ŠðŸ˜ŠðŸ˜Š", "8J+YivCfmIrwn5iK"),
  ];

  fun encode(): void {
    static::cases.each(case -> {
      (decoded, encoded) = case;
      T.expectEq(Base64.encodeString(decoded), encoded)
    });
  }

  fun decode(): void {
    static::cases.each(case -> {
      (decoded, encoded) = case;
      T.expectEq(Base64.decodeString(encoded), decoded)
    });
  }
}

module end;
